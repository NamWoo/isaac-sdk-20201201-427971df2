THREE.STLLoader=function(d){this.manager=void 0!==d?d:THREE.DefaultLoadingManager};
THREE.STLLoader.prototype={constructor:THREE.STLLoader,load:function(d,l,p,g){var e=this,a=new THREE.FileLoader(e.manager);a.setResponseType("arraybuffer");a.load(d,function(a){try{l(e.parse(a))}catch(f){g&&g(f)}},p,g)},parse:function(d){function l(a){a=new DataView(a);for(var q=a.getUint32(80,!0),f,h,b,t=!1,n,d,m,k,g,c=0;70>c;c++)1129270351==a.getUint32(c,!1)&&82==a.getUint8(c+4)&&61==a.getUint8(c+5)&&(t=!0,n=[],d=a.getUint8(c+6)/255,m=a.getUint8(c+7)/255,k=a.getUint8(c+8)/255,g=a.getUint8(c+9)/
255);c=new THREE.BufferGeometry;for(var u=[],e=[],l=0;l<q;l++){var r=84+50*l,p=a.getFloat32(r,!0),x=a.getFloat32(r+4,!0),y=a.getFloat32(r+8,!0);t&&(b=a.getUint16(r+48,!0),0===(b&32768)?(f=(b&31)/31,h=(b>>5&31)/31,b=(b>>10&31)/31):(f=d,h=m,b=k));for(var v=1;3>=v;v++){var w=r+12*v;u.push(a.getFloat32(w,!0));u.push(a.getFloat32(w+4,!0));u.push(a.getFloat32(w+8,!0));e.push(p,x,y);t&&n.push(f,h,b)}}c.addAttribute("position",new THREE.BufferAttribute(new Float32Array(u),3));c.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(e),
3));t&&(c.addAttribute("color",new THREE.BufferAttribute(new Float32Array(n),3)),c.hasColors=!0,c.alpha=g);return c}function p(a){var q=new THREE.BufferGeometry,f=/facet([\s\S]*?)endfacet/g,h=0,b=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,d=new RegExp("vertex"+b+b+b,"g");b=new RegExp("normal"+b+b+b,"g");for(var n=[],g=[],m=new THREE.Vector3,k;null!==(k=f.exec(a));){for(var e=0,c=0,l=k[0];null!==(k=b.exec(l));)m.x=parseFloat(k[1]),m.y=parseFloat(k[2]),m.z=parseFloat(k[3]),c++;for(;null!==
(k=d.exec(l));)n.push(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])),g.push(m.x,m.y,m.z),e++;1!==c&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+h);3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+h);h++}q.addAttribute("position",new THREE.Float32BufferAttribute(n,3));q.addAttribute("normal",new THREE.Float32BufferAttribute(g,3));return q}function g(a){return"string"!==typeof a?THREE.LoaderUtils.decodeText(new Uint8Array(a)):
a}var e=function(a){if("string"===typeof a){for(var d=new Uint8Array(a.length),f=0;f<a.length;f++)d[f]=a.charCodeAt(f)&255;return d.buffer||d}return a}(d);return function(a){a=new DataView(a);if(84+50*a.getUint32(80,!0)===a.byteLength)return!0;for(var d=[115,111,108,105,100],f=0;5>f;f++){a:{var h=d;for(var b=a,g=f,e=0,l=h.length;e<l;e++)if(h[e]!==b.getUint8(g+e,!1)){h=!1;break a}h=!0}if(h)return!1}return!0}(e)?l(e):p(g(d))}};
